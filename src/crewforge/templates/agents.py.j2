"""
CrewAI Agents Template - Generated by CrewForge

This file contains the agent definitions for the {{crew_config.name}} crew.
"""

from crewai import Agent
{% set all_tools = [] %}
{% for agent in crew_config.agents %}
  {% if agent.tools %}
    {% for tool in agent.tools %}
      {% if tool not in all_tools %}
        {% set _ = all_tools.append(tool) %}
      {% endif %}
    {% endfor %}
  {% endif %}
{% endfor %}
{% if all_tools %}
from crewai_tools import {{all_tools|join(', ')}}
{% endif %}


class {{crew_config.name|title|regex_replace('[^a-zA-Z0-9]', '')}}Agents:
    """Agent definitions for {{crew_config.name}} crew."""

{% for agent in crew_config.agents %}
    def {{agent.role|lower|regex_replace('[^a-z0-9\s]', '')|replace(' ', '_')|replace('-', '_')}}(self):
        """{{agent.role}} agent definition."""
        return Agent(
            role="{{agent.role}}",
            goal="{{agent.goal}}",
            backstory="{{agent.backstory}}",
            verbose={{agent.verbose|lower}},
            allow_delegation={{agent.allow_delegation|lower}},{% if agent.max_iter %}
            max_iter={{agent.max_iter}},{% endif %}{% if agent.max_execution_time %}
            max_execution_time={{agent.max_execution_time}},{% endif %}{% if agent.tools %}
            tools=[{{agent.tools|join(', ')}}],{% endif %}
        )
{% endfor %}